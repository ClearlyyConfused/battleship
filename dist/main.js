(()=>{"use strict";class r{constructor(){this.boardArray=[["","","","","",""],["","","","","",""],["","","","","",""],["","","","","",""],["","","","","",""],["","","","","",""]],this.gameStatus=!0}addShip(r,e,t,a){if(e=parseInt(e),t=parseInt(t),"h"===a&&this.checkMoveH(r,e,t))this.addShipH(r,e,t);else{if("v"!==a||!this.checkMoveV(r,e,t))throw"Error, cannot place here!";this.addShipV(r,e,t)}}addShipH(r,e,t){let a=0;for(;a<r;)this.boardArray[e][t+a]="o",a+=1}addShipV(r,e,t){let a=0;for(;a<r;)this.boardArray[e+a][t]="o",a+=1}checkMoveH(r,e,t){let a=0;for(;a<r;){if(""!==this.boardArray[e][t+a])return!1;a+=1}return!0}checkMoveV(r,e,t){let a=0;for(;a<r;){if(""!==this.boardArray[e+a][t])return!1;a+=1}return!0}fireAt(r,e){if(!0===this.gameStatus){if("o"===this.boardArray[r][e])this.boardArray[r][e]="x";else if(""===this.boardArray[r][e])this.boardArray[r][e]="m";else if("x"===this.boardArray[r][e]||"m"===this.boardArray[r][e])throw"You already shot here!";this.checkWin()}}checkWin(){for(const r of this.boardArray)for(const e of r)if("o"===e)return;console.log("Game Over!"),this.gameStatus=!1}resetBoard(){this.boardArray=[["","","","","",""],["","","","","",""],["","","","","",""],["","","","","",""],["","","","","",""],["","","","","",""]]}}function e(r,e){return"boardDisplay1"===e?t(r,0,r.player1Board.boardArray):"boardDisplay2"===e?t(r,1,r.player2Board.boardArray):void 0}function t(r,e,t){let o=0,i=document.createElement("div");for(;o<6;){let s=a(r,e,t,o);i.appendChild(s),o+=1}return i}function a(r,e,t,a){let i=document.createElement("div");return i.setAttribute("class",`column${a}`),i.addEventListener("click",(()=>{!function(r,e,t,a){if(!1===r.fireMode){let i=a.className.slice(-1),s=a.parentNode.className.slice(-1);r.addShips(s,i,"v",e),o(e,t)}}(r,e,t,i)})),i.addEventListener("contextmenu",(a=>{a.preventDefault(),function(r,e,t,a){if(!1===r.fireMode){let i=a.className.slice(-1),s=a.parentNode.className.slice(-1);r.addShips(s,i,"h",e),o(e,t)}}(r,e,t,i)})),i}function o(r,e){let t=0,a=0;for(;t<6;){for(a=0;a<6;){let o=document.querySelectorAll(`#boardDisplay${r+1} .row${t} .column${a}`);for(const i of o)i.innerText="",(0===r||"o"!==e[t][a])&&(i.innerText=e[t][a]);a+=1}t+=1}}function i(r,e,t,a,o,i){for(const d of r)d.addEventListener("click",(()=>{s(e,t,a,o,i)}))}function s(r,e,t,a,i){!0===r.player1Board.gameStatus&&!0===r.player2Board.gameStatus&&(e.fireAt(t,a),o(i,e.boardArray),d(r))}function d(r){try{if(!0===r.player1Board.gameStatus&&!0===r.player2Board.gameStatus){let e=Math.floor(6*Math.random()+0),t=Math.floor(6*Math.random()+0);r.player1Board.fireAt(e,t),o(0,r.player1Board.boardArray)}}catch(e){console.log("already shot there"),d(r)}}function l(r,e){return"boardDisplay1"===e?n(r,0,r.player1Board.boardArray):"boardDisplay2"===e?n(r,1,r.player2Board.boardArray):void 0}function n(r,e,t){let a=0,o=document.createElement("div");for(;a<6;){let r=h(0,0,0,a);o.appendChild(r),a+=1}return o}function h(r,e,t,a){let o=document.createElement("div");return o.setAttribute("class",`column${a}`),o}function c(r,e,t){let a=Math.floor(2*Math.random()+0);0===a?a="v":1===a&&(a="h");try{let i=Math.floor(6*Math.random()+0),s=Math.floor(6*Math.random()+0);r.addShips(s,i,a,e),o(e,t)}catch(a){console.log(`Error: ${a}`),c(r,e,t)}}let p=new class{constructor(){this.player1Board=new r,this.player2Board=new r,this.boards=[this.player1Board,this.player2Board],this.ship1=[!1,!1],this.ship2=[!1,!1],this.ship3=[!1,!1],this.fireMode=!1}startGame(){this.player1Board.gameStatus=!0,this.player2Board.gameStatus=!0,this.ship1=[!1,!1],this.ship2=[!1,!1],this.ship3=[!1,!1],this.fireMode=!1,this.player1Board.resetBoard(),this.player2Board.resetBoard()}addShips(r,e,t,a){let o;return!1===this.ship1[a]?o=3:!1===this.ship2[a]?o=4:!1===this.ship3[a]&&(o=5),!1===this.ship1[a]?(this.boards[a].addShip(o,r,e,t),void(this.ship1[a]=!0)):!1===this.ship2[a]?(this.boards[a].addShip(o,r,e,t),void(this.ship2[a]=!0)):!1===this.ship3[a]?(this.boards[a].addShip(o,r,e,t),void(this.ship3[a]=!0)):void console.log(this.boards[a].boardArray)}};document.querySelector("#startGame").addEventListener("click",(()=>{p.startGame(prompt),document.querySelector("#boardDisplay1 ").innerHTML="",document.querySelector("#boardDisplay2 ").innerHTML="",function(r,t){let a=0;for(;a<6;){let o=e(r,t);o.setAttribute("class",`row${a}`),document.querySelector(`#${t}`).appendChild(o),a+=1}}(p,"boardDisplay1"),function(r,e){let t=0;for(;t<6;){let a=l(r,e);a.setAttribute("class",`row${t}`),document.querySelector(`#${e}`).appendChild(a),t+=1}c(r,1,r.player2Board.boardArray),c(r,1,r.player2Board.boardArray),c(r,1,r.player2Board.boardArray)}(p,"boardDisplay2")})),document.querySelector("#fireAt").addEventListener("click",(()=>{!function(r){let e;r.fireMode=!0;let t=0,a=0;for(;t<6;){for(a=0;a<6;)e=document.querySelectorAll(`#boardDisplay1 .row${t} .column${a}`),i(e,r,r.player1Board,t,a,0),e=document.querySelectorAll(`#boardDisplay2 .row${t} .column${a}`),i(e,r,r.player2Board,t,a,1),a+=1;t+=1}}(p)})),document.querySelector("#displayShipsAI").addEventListener("click",(()=>{!function(r,e){let t=0,a=0;for(;t<6;){for(a=0;a<6;){let r=document.querySelectorAll(`#boardDisplay2 .row${t} .column${a}`);for(const o of r)o.innerText=e[t][a];a+=1}t+=1}}(0,p.player2Board.boardArray)}))})();