(()=>{"use strict";var e={d:(r,t)=>{for(var o in t)e.o(t,o)&&!e.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:t[o]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r)};e.d({},{z:()=>b});class r{constructor(){this.boardArray=[["","","","","",""],["","","","","",""],["","","","","",""],["","","","","",""],["","","","","",""],["","","","","",""]],this.gameStatus=!0}addShip(e,r,t,o){if(r=parseInt(r),t=parseInt(t),"h"===o&&this.checkMoveH(e,r,t))this.addShipH(e,r,t);else{if("v"!==o||!this.checkMoveV(e,r,t))throw"Error, cannot place here!";this.addShipV(e,r,t)}}addShipH(e,r,t){let o=0;for(;o<e;)this.boardArray[r][t+o]="o",o+=1}addShipV(e,r,t){let o=0;for(;o<e;)this.boardArray[r+o][t]="o",o+=1}checkMoveH(e,r,t){let o=0;for(;o<e;){if(""!==this.boardArray[r][t+o])return!1;o+=1}return!0}checkMoveV(e,r,t){let o=0;for(;o<e;){if(""!==this.boardArray[r+o][t])return!1;o+=1}return!0}fireAt(e,r){if(e>5||r>5||e<0||r<0)throw"Error, out of board";if(!0===this.gameStatus){if("o"===this.boardArray[e][r])this.boardArray[e][r]="x";else if(""===this.boardArray[e][r])this.boardArray[e][r]="m";else if("x"===this.boardArray[e][r]||"m"===this.boardArray[e][r])throw"You already shot here!";this.checkWin()}}checkWin(){for(const e of this.boardArray)for(const r of e)if("o"===r)return;console.log("Game Over!"),this.gameStatus=!1}resetBoard(){this.boardArray=[["","","","","",""],["","","","","",""],["","","","","",""],["","","","","",""],["","","","","",""],["","","","","",""]]}}function t(e){const r=document.querySelector("#boardDisplay2"),t=document.createElement("div"),o=document.createElement("div");r.innerHTML="",r.appendChild(o),r.appendChild(t),t.setAttribute("id","currentShipDisplay"),o.setAttribute("id","shipDisplayDescription"),function(e,r,t){!1===e.ship1[0]?(t.innerText="Current Ship Size (2)",r.innerText="oo"):!1===e.ship2[0]?(t.innerText="Current Ship Size (3)",r.innerText="ooo"):!1===e.ship3[0]?(t.innerText="Current Ship Size (4)",r.innerText="oooo"):(t.innerText="Current Ship Size (5)",r.innerText="ooooo")}(e,t,o)}function o(){const e=document.querySelector("#gameOver");e.innerHTML="",e.style.backgroundColor="rgba(0, 0, 0, 0)"}function a(e){document.querySelector("#playerShipAmount").innerText=e[0],document.querySelector("#AIShipAmount").innerText=e[1]}function i(e,r,t){try{let o=function(){let e=Math.floor(2*Math.random());return 0===e?"v":1===e?"h":void 0}(),a=Math.floor(6*Math.random()),i=Math.floor(6*Math.random());e.addShips(i,a,o,r),y(r,t)}catch(o){i(e,r,t)}}function n(e){const r=document.querySelector("#difficultyLevel").value;try{e.checkGameStatus()&&(function(e){return 0===(e=parseInt(e))?Math.floor(7*Math.random()):1===e?Math.floor(9*Math.random()):2===e?Math.floor(14*Math.random()):void 0}(r)>5?function(e){let r=0;for(;r<6;){let t=0;for(;t<6;)if("o"!==e.player1Board.boardArray[r][t])t+=1;else{if("chosen"==(Math.floor(101*Math.random())<=5?"chosen":"not chosen"))return e.player1Board.fireAt(r,t),void y(0,e.player1Board.boardArray);t+=1}r+=1,6===r&&(r=0)}}(e):function(e){let r=Math.floor(6*Math.random()),t=Math.floor(6*Math.random());e.player1Board.fireAt(r,t),y(0,e.player1Board.boardArray)}(e))}catch(r){n(e)}}function s(e,r){let t=0;for(;t<6;){let o=d(e,r);o.setAttribute("class",`row${t}`),document.querySelector(`#${r}`).appendChild(o),t+=1}}function d(e,r){return"boardDisplay1"===r?h(e,0,e.player1Board.boardArray):"boardDisplay2"===r?h(e,1,e.player2Board.boardArray):void 0}function h(e,r,t){let o=0,a=document.createElement("div");for(;o<6;){let i=l(e,r,t,o);a.appendChild(i),o+=1}return a}function l(e,r,t,o){let a=document.createElement("div");return a.setAttribute("class",`column${o}`),a.addEventListener("click",(()=>{c(e,r,t,a,"v")})),a.addEventListener("contextmenu",(o=>{o.preventDefault(),c(e,r,t,a,"h")})),a}function c(e,r,o,a,n){let d=0;if(!1===e.fireMode){let h=a.className.slice(-1),l=a.parentNode.className.slice(-1);"beginFirePhase"===e.addShips(l,h,n,r)&&(document.querySelector("#boardDisplay2").innerHTML="",s(e,"boardDisplay2"),function(e){i(e,1,e.player2Board.boardArray),i(e,1,e.player2Board.boardArray),i(e,1,e.player2Board.boardArray),i(e,1,e.player2Board.boardArray)}(e),function(e){let r;e.fireMode=!0,document.querySelector("#gamePhase").innerText="Firing Phase",document.querySelector("#phaseDescription").innerText="Attack the enemy board using LMB";let t=0,o=0;for(;t<6;){for(o=0;o<6;)r=document.querySelectorAll(`#boardDisplay2 .row${t} .column${o}`),f(r,e,e.player2Board,t,o,1),o+=1;t+=1}}(e),d=1),0===d&&t(e),y(r,o)}p(e)}function u(e,r,t,a,i){e.checkGameStatus()&&(r.fireAt(t,a),y(i,r.boardArray),n(e)),p(e),!1===e.checkGameStatus()&&function(e){const r=document.querySelector("#gameOver");r.style.backgroundColor="rgba(0, 0, 0, 0.7)",!1===e.player1Board.gameStatus&&(r.innerText="Game Over! AI wins!"),!1===e.player2Board.gameStatus&&(r.innerText="Game Over! User wins!"),r.appendChild(function(e){const r=document.createElement("button");return r.innerText="Play Again!",r.addEventListener("click",(()=>{b(e),o()})),r}(e))}(e)}function p(e){let r=0,t=0,o=0,i=0;for(;r<6;){for(t=0;t<6;)"o"===e.player1Board.boardArray[r][t]&&(o+=1),"o"===e.player2Board.boardArray[r][t]&&(i+=1),t+=1;r+=1}a([o,i])}function y(e,r,t=!1){let o=0,a=0;for(;o<6;){for(a=0;a<6;){let i=document.querySelectorAll(`#boardDisplay${e+1} .row${o} .column${a}`);for(const n of i)n.innerText="",0===e?(n.innerText=r[o][a],"x"===r[o][a]&&(n.style.backgroundColor="red"),"m"===r[o][a]&&(n.style.backgroundColor="lightblue")):1===e&&("o"!==r[o][a]&&(n.innerText=r[o][a]),!0===t&&(n.innerText=r[o][a]),"x"===r[o][a]&&(n.style.backgroundColor="green"),"m"===r[o][a]&&(n.style.backgroundColor="lightblue"));a+=1}o+=1}}function f(e,r,t,o,a,i){for(const n of e)n.addEventListener("click",(()=>{u(r,t,o,a,i)}))}const m=new class{constructor(){this.player1Board=new r,this.player2Board=new r,this.boards=[this.player1Board,this.player2Board],this.ship1=[!1,!1],this.ship2=[!1,!1],this.ship3=[!1,!1],this.ship4=[!1,!1],this.fireMode=!1}startGame(){this.player1Board.gameStatus=!0,this.player2Board.gameStatus=!0,this.ship1=[!1,!1],this.ship2=[!1,!1],this.ship3=[!1,!1],this.ship4=[!1,!1],this.fireMode=!1,this.player1Board.resetBoard(),this.player2Board.resetBoard()}addShips(e,r,t,o){let a;return!1===this.ship1[o]?a=2:!1===this.ship2[o]?a=3:!1===this.ship3[o]?a=4:!1===this.ship4[o]&&(a=5),!1===this.ship1[o]?(this.boards[o].addShip(a,e,r,t),void(this.ship1[o]=!0)):!1===this.ship2[o]?(this.boards[o].addShip(a,e,r,t),void(this.ship2[o]=!0)):!1===this.ship3[o]?(this.boards[o].addShip(a,e,r,t),void(this.ship3[o]=!0)):!1===this.ship4[o]?(this.boards[o].addShip(a,e,r,t),this.ship4[o]=!0,"beginFirePhase"):void 0}checkGameStatus(){return!0===this.player1Board.gameStatus&&!0===this.player2Board.gameStatus}};function b(e){e.startGame(prompt),document.querySelector("#boardDisplay1 ").innerHTML="",document.querySelector("#boardDisplay2 ").innerHTML="",s(e,"boardDisplay1"),document.querySelector("#gamePhase").innerText="Placement Phase",document.querySelector("#phaseDescription").innerText="Place your ships using LMB (vertical) and RMB (horizontal)",t(e),a([0,0])}b(m),document.querySelector("#resetGame").addEventListener("click",(()=>{b(m),o()})),document.querySelector("#displayShipsAI").addEventListener("click",(()=>{y(1,m.player2Board.boardArray,!0)}))})();